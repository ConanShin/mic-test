# 음성 인식 WebSocket 클라이언트

이 프로젝트는 Node.js를 사용하여 WebSocket 서버에 음성 데이터를 전송하고, 음성 인식 결과를 받아 출력하는 간단한 클라이언트 예제입니다.  
`r` 키를 눌러 WebSocket 연결을 재시도하고 음성 인식을 다시 시작할 수 있습니다.

---

## 주요 기능

- 마이크에서 음성 입력을 실시간 스트리밍하여 WebSocket 서버로 전송
- 서버로부터 음성 인식 결과 수신 및 콘솔 출력
- `r` 키 입력 시 기존 연결 종료 후 재연결 및 음성 인식 재시작

---

## 사전 준비

- Node.js (버전 12 이상 권장) 설치
- `sox` 또는 `arecord`가 설치되어 있어야 함 (녹음 프로그램)
  - Mac/Linux 환경에서 `rec` (sox) 또는 `arecord` 사용 가능
- WebSocket 음성 인식 서버 구동 중이어야 함 (`ws://localhost:8090/recognition` 사용 예시)

---

## 설치 및 실행 방법

1. 프로젝트 폴더로 이동 후 필요한 패키지 설치
```npm install```

2. 다음 명령어로 앱 실행
```node index.js```

3. 실행 후 "음성을 말하세요... (r을 누르면 재시작)" 문구가 출력되면 음성 입력 대기 상태입니다.  
   음성을 말하면 서버가 인식 결과를 응답합니다.

4. 음성 인식을 중단하고 WebSocket 연결을 재시작하려면 터미널에서 `r`을 입력하고 엔터를 누르세요.

---

## 코드 설명

- `node-record-lpcm16` 라이브러리를 이용하여 마이크에서 16kHz 샘플링 음성을 스트리밍  
- `ws` 라이브러리로 WebSocket 연결 수립 및 데이터 송수신  
- `readline` 모듈을 사용해 터미널 입력 감지(`r` 키 입력 시 연결 재시작)

---

## 주의 사항

- 마이크 녹음 프로그램(`rec`, `arecord`)이 정상 동작해야 합니다.  
- WebSocket 서버 주소(`WEBSOCKET_URL`)와 헤더(`BMW-Client-Id`)는 환경에 맞게 수정하세요.  
- `r` 입력 시 기존 연결이 종료되므로 서버 간 연결 제한이 있을 경우 주의하세요.

---



